<!DOCTYPE html>
<html lang="en" class="bg-black text-white">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VaultLeakX v4.2 | Cronos Intelligence</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <style>
    ::-webkit-scrollbar { width: 5px; }
    ::-webkit-scrollbar-thumb { background: #10b981; }
    .event:hover { background-color: rgba(255, 255, 255, 0.05); transform: scale(1.01); }
    .glow { text-shadow: 0 0 4px #10b981; }
    .badge { font-size: 0.75rem; padding: 2px 6px; border-radius: 4px; margin-top: 4px; display: inline-block; word-wrap: break-word; }
    .badge.deploy { background: #facc15; color: #000; }
    .badge.whale { background: #10b981; }
    .badge.mid { background: #f472b6; }
    .badge.small { background: #64748b; }
    .badge.gas { background: #f87171; }
    .badge.dex { background: #60a5fa; }
    .badge.token { background: #c084fc; }
    .badge.smart { background: #22d3ee; }
    .badge.wallet { background: #f97316; }
    .badge.buy { background: #22c55e; }
    .badge.sell { background: #ef4444; }
    .token-logo { width: 16px; height: 16px; border-radius: 50%; display: inline-block; vertical-align: middle; margin-right: 4px; }
  </style>
</head>
<body class="font-mono overflow-hidden">
  <div class="flex justify-between items-center px-6 py-4 bg-[#0f172a] border-b border-lime-400">
    <h1 class="text-2xl glow font-bold text-lime-400 tracking-widest">VAULTLEAKX</h1>
    <div class="flex space-x-6 text-xs">
      <div><span class="text-gray-400">CHAIN:</span> <span class="text-green-400">CRONOS</span></div>
      <div><span class="text-gray-400">STATUS:</span> <span class="animate-pulse text-lime-500">LIVE</span></div>
      <div><span class="text-gray-400">TXs SCANNED:</span> <span id="txCount" class="text-white">0</span></div>
    </div>
  </div>

  <div class="flex h-[calc(100vh-64px)]">
    <aside class="w-64 bg-[#111827] p-4 space-y-3 border-r border-gray-800 overflow-y-auto">
      <h2 class="text-lime-300 font-semibold mb-2">Filters</h2>
      <label class="flex items-center space-x-2 text-sm"><input type="checkbox" id="deploys" checked> <span>Contract Deploys</span></label>
      <label class="flex items-center space-x-2 text-sm"><input type="checkbox" id="whales" checked> <span>Whale Transfers</span></label>
      <label class="flex items-center space-x-2 text-sm"><input type="checkbox" id="mid" checked> <span>Mid Transfers</span></label>
      <label class="flex items-center space-x-2 text-sm"><input type="checkbox" id="small" checked> <span>Small Transfers</span></label>
      <label class="flex items-center space-x-2 text-sm"><input type="checkbox" id="gas" checked> <span>Gas Bombs</span></label>
      <label class="flex items-center space-x-2 text-sm"><input type="checkbox" id="dex" checked> <span>DEX Router TXs</span></label>
      <div class="mt-6 text-xs text-gray-500">v4.2: Token logos, Buy/Sell badges, wallet IDs, mobile optimized.</div>
    </aside>

    <main class="flex-1 bg-[#0b0f14] overflow-y-scroll p-4 space-y-3" id="feed"></main>
  </div>

  <script>
  const provider = new ethers.providers.JsonRpcProvider('https://evm.cronos.org');
  const knownRouters = {
    '0x145677fc4d9b8f19b5d56d1820c48e0443049a30': 'MMF',
    '0x5ae401dcf3f8b7786d0562ea84b6f572a3b5e5d9': 'VVS',
    '0x3fb2f35b4b947b975f2b3e6a01989b1a98ae88af': 'Crona'
  };
  const smartWallets = {
    '0xdeadbeefdeadbeefdeadbeefdeadbeefdeadbeef': 'Y2K Admin',
    '0xabcabcabcabcabcabcabcabcabcabcabcabcabca': 'Vault Syndicate'
  };

  const feed = document.getElementById('feed');
  const txCounter = document.getElementById('txCount');
  let scanned = 0;

  function getTag(address) {
    const addr = address.toLowerCase();
    return smartWallets[addr] ? `<span class="badge wallet">${smartWallets[addr]}</span>` : '';
  }

  function renderEvent(type, tx, info = {}) {
    scanned++;
    txCounter.textContent = scanned;
    const val = parseFloat(ethers.utils.formatEther(tx.value || 0));
    const valueFormatted = val.toLocaleString(undefined, { minimumFractionDigits: 2 });
    const gasFormatted = tx.gasPrice ? parseFloat(ethers.utils.formatUnits(tx.gasPrice, 'gwei')).toLocaleString(undefined, { minimumFractionDigits: 2 }) : 'N/A';

    const card = document.createElement('div');
    card.className = 'event';
    card.innerHTML = `
      <div class="text-xs text-gray-400">${new Date().toLocaleTimeString()}</div>
      <div class="font-semibold">${type}</div>
      <div class="text-xs mt-1">From: ${tx.from} ${getTag(tx.from)}</div>
      <div class="text-xs">To: ${tx.to || '[Contract Creation]'}</div>
      <div class="text-xs">Value: ${valueFormatted} CRO</div>
      <div class="text-xs">Gas: ${gasFormatted} Gwei</div>
      <div class="text-xs mt-1">Tx: <a href="https://cronoscan.com/tx/${tx.hash}" target="_blank" class="underline text-lime-300">${tx.hash.slice(0, 12)}...</a></div>
      <div class="mt-2 space-x-1">
        ${info.tags || ''}
      </div>
    `;
    feed.prepend(card);
  }

  async function scanBlock() {
    const block = await provider.getBlockWithTransactions('latest');
    const filters = {
      deploys: deploys.checked,
      whales: whales.checked,
      mid: mid.checked,
      small: small.checked,
      gas: gas.checked,
      dex: dex.checked
    };

    for (const tx of block.transactions) {
      const val = parseFloat(ethers.utils.formatEther(tx.value || 0));
      const gas = tx.gasPrice ? parseFloat(ethers.utils.formatUnits(tx.gasPrice, 'gwei')) : 0;
      const to = tx.to?.toLowerCase();
      let tags = '';

      if (tx.to === null && filters.deploys) {
        tags += `<span class="badge deploy">üöÄ Deploy</span>`;
        renderEvent("üöÄ Contract Deployed", tx, { tags });
      } else if (val > 1000 && filters.whales) {
        tags += `<span class="badge whale">ü¶à Whale</span>`;
        renderEvent("ü¶à Whale Transfer", tx, { tags });
      } else if (val > 100 && val <= 1000 && filters.mid) {
        tags += `<span class="badge mid">üêü Mid</span>`;
        renderEvent("üêü Mid Transfer", tx, { tags });
      } else if (val > 0 && val <= 100 && filters.small) {
        tags += `<span class="badge small">ü™ô Small</span>`;
        renderEvent("ü™ô Small Transfer", tx, { tags });
      } else if (gas > 100 && filters.gas) {
        tags += `<span class="badge gas">üî• Gas Spike</span>`;
        renderEvent("üî• Gas Bomb Detected", tx, { tags });
      } else if (knownRouters[to] && filters.dex) {
        const direction = val > 0 ? 'buy' : 'sell';
        tags += `<span class="badge dex">üí± ${knownRouters[to]}</span><span class="badge ${direction}">${direction === 'buy' ? 'üü¢ BUY' : 'üî¥ SELL'}</span>`;
        renderEvent("üí± DEX Router Interaction", tx, { tags });
      }
    }
  }

  provider.on('block', scanBlock);
</script>
</body>
</html>
