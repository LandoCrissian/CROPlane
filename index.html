<!DOCTYPE html>
<html lang="en" class="bg-[#0b0f14] text-white">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VaultLeakX | Cronos Alpha Scanner</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <style>
    ::-webkit-scrollbar { display: none; }
    .tx-card:hover { background-color: #1f2937; }
  </style>
</head>
<body class="font-mono overflow-hidden">
  <!-- HEADER -->
  <div class="w-full px-6 py-4 bg-[#111827] border-b border-lime-500 flex items-center justify-between">
    <h1 class="text-2xl text-lime-400 font-bold">VaultLeakX</h1>
    <span class="text-gray-400 text-sm">Cronos Mempool Surveillance v1.0</span>
  </div>

  <div class="flex h-[calc(100vh-64px)]">
    <!-- SIDEBAR FILTERS -->
    <div class="w-64 bg-[#0f172a] border-r border-gray-800 p-4 space-y-4">
      <h2 class="text-lg font-semibold text-lime-300">Filters</h2>
      <label class="flex items-center space-x-2">
        <input type="checkbox" id="toggleDeploys" checked class="accent-lime-400" />
        <span>Contract Deploys</span>
      </label>
      <label class="flex items-center space-x-2">
        <input type="checkbox" id="toggleWhales" checked class="accent-lime-400" />
        <span>Whale Transfers</span>
      </label>
      <label class="flex items-center space-x-2">
        <input type="checkbox" id="toggleGas" checked class="accent-lime-400" />
        <span>Gas Bombs</span>
      </label>
      <div class="mt-6 text-xs text-gray-400">
        Designed for Y2K Syndicate Ops
      </div>
    </div>

    <!-- LIVE FEED -->
    <div class="flex-1 p-4 overflow-y-scroll space-y-2" id="txFeed"></div>
  </div>

  <!-- SCANNER LOGIC -->
  <script>
    const provider = new ethers.providers.JsonRpcProvider('https://evm.cronos.org');
    const feed = document.getElementById('txFeed');

    const deployFilter = document.getElementById('toggleDeploys');
    const whaleFilter = document.getElementById('toggleWhales');
    const gasFilter = document.getElementById('toggleGas');

    provider.on('pending', async (txHash) => {
      try {
        const tx = await provider.getTransaction(txHash);
        if (!tx) return;

        const valueEth = parseFloat(ethers.utils.formatEther(tx.value || 0));
        const gasGwei = tx.gasPrice ? parseFloat(ethers.utils.formatUnits(tx.gasPrice, 'gwei')) : 0;

        const isDeploy = tx.to === null;
        const isWhale = valueEth > 100;
        const isGasBomb = gasGwei > 100;

        if (
          (isDeploy && deployFilter.checked) ||
          (isWhale && whaleFilter.checked) ||
          (isGasBomb && gasFilter.checked)
        ) {
          const card = document.createElement('div');
          card.className = `tx-card p-3 rounded-lg border ${
            isDeploy ? 'border-yellow-400' : isWhale ? 'border-green-400' : 'border-red-500'
          }`;

          card.innerHTML = `
            <div class="text-xs text-gray-500">${new Date().toLocaleTimeString()}</div>
            <div class="text-sm font-semibold">${isDeploy ? 'ðŸš€ Contract Deploy' : isWhale ? 'ðŸ¦ˆ Whale Transfer' : 'ðŸ”¥ Gas Bomb'}</div>
            <div class="text-xs mt-1">Hash: ${txHash.slice(0, 18)}...</div>
            <div class="text-xs">From: ${tx.from}</div>
            <div class="text-xs">To: ${tx.to || 'N/A'}</div>
            <div class="text-xs">Value: ${valueEth.toFixed(3)} CRO</div>
            <div class="text-xs">Gas: ${gasGwei.toFixed(2)} Gwei</div>
          `;
          feed.prepend(card);
        }
      } catch (e) {
        console.log('Error processing tx', e);
      }
    });
  </script>
</body>
</html>
